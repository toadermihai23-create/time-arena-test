<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TimeArena demo</title>

  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0b1220" />
  <link rel="apple-touch-icon" href="icon-192.png" />

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- LOGIN / ROLE -->
  <div id="loginOverlay" class="overlay">
    <div class="modal">
      <div class="modal-title">â³ TimeArena demo</div>
      <div class="modal-sub">Alege rolul</div>

      <div class="role-grid">
        <button class="role-btn" id="btnChild">ğŸ‘¦ Copil</button>
        <button class="role-btn role-parent" id="btnParent">ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ PÄƒrinte</button>
      </div>

      <div id="pinWrap" class="pin-wrap hidden">
        <label for="pinInput">PIN PÄƒrinte</label>
        <input id="pinInput" type="password" inputmode="numeric" placeholder="ex: 1234" />
        <div class="pin-row">
          <button id="pinCancel" class="ghost">AnuleazÄƒ</button>
          <button id="pinOk" class="primary">IntrÄƒ</button>
        </div>
        <div class="tiny">PIN implicit: <b>1234</b> (se poate schimba din Reguli)</div>
      </div>
    </div>
  </div>

  <div class="app">
    <!-- SIDEBAR / NAV -->
    <nav class="nav">
      <div class="brand">
        <div class="brand-badge">â³</div>
        <div class="brand-meta">
          <div class="brand-name">TimeArena demo</div>
          <div class="brand-sub">Playtime Quest System</div>
        </div>
      </div>

      <div class="nav-items">
        <button class="nav-item active" data-view="dashboard">ğŸ  <span>Panou</span></button>
        <button class="nav-item" data-view="missions">ğŸ¯ <span>Misiuni</span></button>
        <button class="nav-item" data-view="shop">ğŸ›’ <span>Magazin</span></button>
        <button class="nav-item" data-view="penalties">ğŸš« <span>PenalitÄƒÈ›i</span></button>
        <button class="nav-item" data-view="history">ğŸ“œ <span>Istoric</span></button>
        <button class="nav-item" data-view="rules">ğŸ“˜ <span>Reguli</span></button>
        <button class="nav-item" data-view="report">ğŸ“„ <span>Raport</span></button>
      </div>

      <div class="nav-footer">
        <div class="role-pill" id="rolePill">Rol: â€”</div>
        <button class="nav-mini" id="btnSwitchRole">ğŸ” SchimbÄƒ rol</button>
      </div>
    </nav>

    <!-- MAIN -->
    <main class="content">
      <!-- TOP BAR -->
      <header class="topbar">
        <div class="topbar-left">
          <div class="chip" id="playModeChip">ğŸ”’ Play Mode OFF</div>
          <div class="chip soft" id="unlockChip">ğŸ”“ Unlock: â€”</div>
        </div>
        <div class="topbar-right parent-only">
          <button class="btn" id="togglePlayMode">Toggle Play Mode</button>
          <button class="btn ghost" id="resetDay">Reset Zi</button>
        </div>
      </header>

      <!-- DASHBOARD -->
      <section id="dashboard" class="view active">
        <div class="page-title">
          <h1>ğŸ  Panou principal</h1>
          <p>Status rapid + progres.</p>
        </div>

        <div class="grid-4">
          <div class="card stat green">
            <div class="stat-label">â³ Minute</div>
            <div class="stat-value" id="statMinutes">0</div>
            <div class="stat-sub">Banca de timp</div>
          </div>

          <div class="card stat blue">
            <div class="stat-label">â­ Level</div>
            <div class="stat-value" id="statLevel">1</div>
            <div class="stat-sub">+1 level / 100 min</div>
          </div>

          <div class="card stat yellow">
            <div class="stat-label">ğŸ”¥ MotivaÈ›ie</div>
            <div class="stat-value" id="statMotivation">100%</div>
            <div class="stat-sub">Boost din streak</div>
          </div>

          <div class="card stat purple">
            <div class="stat-label">ğŸ”¥ Streak</div>
            <div class="stat-value" id="statStreak">0</div>
            <div class="stat-sub">Zile consecutive bune</div>
          </div>
        </div>

        <div class="card progress-card">
          <div class="row">
            <div>
              <div class="mini-title">Progres cÄƒtre urmÄƒtorul level</div>
              <div class="mini-sub" id="progressText">0 / 100</div>
            </div>
            <div class="badge" id="levelBadge">LEVEL 1</div>
          </div>
          <div class="progress">
            <div class="progress-fill" id="progressFill" style="width:0%"></div>
          </div>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-title">ğŸ”“ DeblocÄƒri azi</div>
            <div class="pill-row" id="unlockPills"></div>
            <div class="tiny">Teme + Limbi + Morning = deblocÄƒri cheie.</div>
          </div>

          <div class="card">
            <div class="card-title">ğŸ† Quest-uri rapide</div>
            <div class="quick-list" id="quickMissions"></div>
          </div>
        </div>
      </section>

      <!-- MISSIONS -->
      <section id="missions" class="view">
        <div class="page-title">
          <h1>ğŸ¯ Misiuni</h1>
          <p>Tap pe âœ” ca sÄƒ le finalizezi.</p>
        </div>

        <div class="toolbar">
          <input id="searchMissions" class="input" placeholder="CautÄƒ misiune..." />
          <select id="filterCategory" class="input">
            <option value="all">Toate categoriile</option>
            <option value="responsibility">Responsabilitate</option>
            <option value="behavior">Comportament</option>
            <option value="school">È˜coalÄƒ</option>
            <option value="activity">ActivitÄƒÈ›i & sport</option>
            <option value="family">Familie & relaÈ›ie</option>
            <option value="special">Super Bonus</option>
            <option value="recovery">Revenire Ã®n joc</option>
            <option value="unlock">DeblocÄƒri</option>
          </select>
        </div>

        <div class="section-card">
          <div class="section-head">
            <h2>ğŸ”“ DeblocÄƒri</h2>
            <div class="hint">Obligatorii pentru acces la joc.</div>
          </div>
          <div id="listUnlock" class="mission-grid"></div>
        </div>

        <div class="section-card">
          <div class="section-head">
            <h2>ğŸŸ¢ Time Winner</h2>
            <div class="hint">CÃ¢È™tigi minute.</div>
          </div>
          <div id="listWinners" class="mission-grid"></div>
        </div>

        <div class="section-card">
          <div class="section-head">
            <h2>ğŸŒŸ Bonus fÄƒrÄƒ penalitÄƒÈ›i</h2>
            <div class="hint">Extra reward (nu se scade).</div>
          </div>
          <div id="listBonus" class="mission-grid"></div>
        </div>

        <div class="section-card">
          <div class="section-head">
            <h2>ğŸŸ£ Revenire Ã®n joc</h2>
            <div class="hint">DupÄƒ pedeapsÄƒ gravÄƒ.</div>
          </div>
          <div id="listRecovery" class="mission-grid"></div>
        </div>
      </section>

      <!-- SHOP -->
      <section id="shop" class="view">
        <div class="page-title">
          <h1>ğŸ›’ Magazin</h1>
          <p>Cheltuie minute pentru recompense.</p>
        </div>

        <div class="shop-grid" id="shopGrid"></div>
      </section>

      <!-- PENALTIES -->
      <section id="penalties" class="view">
        <div class="page-title">
          <h1>ğŸš« PenalitÄƒÈ›i</h1>
          <p>Damage cards: scad minute (bonus) È™i pot bloca Play Mode.</p>
        </div>

        <div class="section-card danger">
          <div class="section-head">
            <h2>ğŸ”´ Damage Cards</h2>
            <div class="hint">FoloseÈ™te rar, calm, fÄƒrÄƒ negocieri.</div>
          </div>
          <div id="listPenalties" class="mission-grid"></div>
        </div>

        <div class="card">
          <div class="card-title">ğŸ›‘ Blocare / Deblocare</div>
          <div class="tiny">
            DacÄƒ ai aplicat o pedeapsÄƒ gravÄƒ (Play OFF), copilul revine Ã®n joc doar dupÄƒ ce finalizeazÄƒ misiunile de <b>Revenire Ã®n joc</b>.
          </div>
        </div>
      </section>

      <!-- HISTORY -->
      <section id="history" class="view">
        <div class="page-title">
          <h1>ğŸ“œ Istoric</h1>
          <p>Ultimele acÈ›iuni.</p>
        </div>

        <div class="card">
          <div class="card-title">Log</div>
          <div id="historyList" class="history"></div>
          <div class="row mt">
            <button class="btn ghost parent-only" id="clearHistory">È˜terge istoric</button>
          </div>
        </div>
      </section>

      <!-- RULES -->
      <section id="rules" class="view">
        <div class="page-title">
          <h1>ğŸ“˜ Lista de Reguli</h1>
          <p>Clar, scurt, ca Ã®ntr-un joc.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-title">ğŸŸ¦ Reguli principale</div>
            <ul class="rules">
              <li>Minutele se cÃ¢È™tigÄƒ, nu se cer.</li>
              <li>Teme (1h) + Limbi (1h) sunt obligatorii zilnic.</li>
              <li>FÄƒrÄƒ misiuni obligatorii â†’ fÄƒrÄƒ bonusuri.</li>
              <li>PenalizÄƒrile scad doar bonusurile (exceptÃ¢nd cazuri grave).</li>
              <li>Zi nouÄƒ = reset + È™ansÄƒ nouÄƒ.</li>
            </ul>
          </div>

          <div class="card">
            <div class="card-title">ğŸŸ§ Reguli secundare</div>
            <ul class="rules">
              <li>Minciuna blocheazÄƒ bonusurile Ã®n ziua respectivÄƒ.</li>
              <li>TriÈ™area sistemului = Play OFF (pedeapsÄƒ gravÄƒ).</li>
              <li>Revenirea Ã®n joc se face prin misiuni de Repair/Reset.</li>
              <li>Streak-ul creÈ™te motivaÈ›ia È™i oferÄƒ bonus cosmetic.</li>
            </ul>

            <div class="card-title mt">ğŸ” SetÄƒri pÄƒrinte</div>
            <div class="row">
              <input id="pinNew" class="input" placeholder="SchimbÄƒ PIN (ex: 2468)" inputmode="numeric" />
              <button class="btn parent-only" id="savePin">SalveazÄƒ PIN</button>
            </div>
            <div class="tiny">PIN-ul controleazÄƒ accesul de pÄƒrinte.</div>
          </div>
        </div>
      </section>

      <!-- REPORT -->
      <section id="report" class="view">
        <div class="page-title">
          <h1>ğŸ“„ Raport</h1>
          <p>Export PDF (ultimele 7 zile).</p>
        </div>

        <div class="card">
          <div class="card-title">Raport sÄƒptÄƒmÃ¢nal</div>
          <div class="row">
            <button class="btn parent-only" id="exportPdf">ğŸ“„ Export PDF</button>
            <button class="btn ghost parent-only" id="endDay">ğŸŒ™ Ãnchide ziua (streak)</button>
          </div>
          <div class="tiny mt">
            Pentru streak: Ã®nchide ziua ca â€œSuccesâ€ dacÄƒ misiunile obligatorii sunt completate È™i nu a fost Play OFF.
          </div>
        </div>
      </section>

      <!-- LEVEL UP TOAST -->
      <div id="toast" class="toast hidden">â­ LEVEL UP!</div>
    </main>
  </div>

  <!-- Confetti + jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- Data first -->
  <script src="missions.js"></script>
  <script src="app.js"></script>
</body>
</html>
